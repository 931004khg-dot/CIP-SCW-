# 가시설 흙막이 벽체 자동 작도 - 사용자 가이드

## 목차

1. [소개](#소개)
2. [설치 방법](#설치-방법)
3. [기본 사용법](#기본-사용법)
4. [공법별 상세 가이드](#공법별-상세-가이드)
5. [팁과 트릭](#팁과-트릭)
6. [문제 해결](#문제-해결)

---

## 소개

### 프로그램 개요

이 LISP 프로그램은 건축물의 지하벽체 경계선을 따라 흙막이 벽체 구조물을 자동으로 작도하는 도구입니다. 지반 가시설 설계 업무의 반복적인 작업을 자동화하여 작업 효율을 크게 향상시킵니다.

### 지원 공법

1. **H-Pile + 토류판 공법**: 중소규모 굴착에 적합한 경제적인 공법
2. **CIP 공법**: 현장타설 콘크리트 말뚝, 차수성이 우수
3. **S.C.W 공법**: 소일시멘트 연속벽체, 대규모 굴착에 적합

### 주요 기능

- ✅ 경계선 자동 인식 (Polyline/Line)
- ✅ 엄지말뚝/벽체 자동 배치
- ✅ 띠장(Wale) 자동 생성
- ✅ 버팀보(Strut) 자동 배치
- ✅ 레이어 자동 관리
- ✅ 규격 및 문자 자동 표기

---

## 설치 방법

### 1단계: 파일 다운로드

모든 `.lsp` 파일을 동일한 폴더에 다운로드합니다:

```
lisp/
├── retaining-utils.lsp      # 공통 유틸리티
├── hpile-retaining.lsp      # H-Pile+토류판 공법
├── cip-retaining.lsp        # CIP 공법
├── scw-retaining.lsp        # S.C.W 공법
└── retaining-main.lsp       # 메인 프로그램
```

### 2단계: AutoCAD에 로드

#### 방법 1: 수동 로드

1. AutoCAD 실행
2. 명령줄에 `APPLOAD` 입력
3. `retaining-main.lsp` 파일 선택
4. "로드" 버튼 클릭

#### 방법 2: 자동 로드 (권장)

`acaddoc.lsp` 파일에 다음 코드 추가:

```lisp
(load "C:/path/to/your/lisp/retaining-main.lsp")
```

**경로 예시:**
```lisp
(load "C:/Users/YourName/Documents/AutoCAD/lisp/retaining-main.lsp")
```

### 3단계: 로드 확인

명령줄에 다음 메시지가 표시되면 성공:

```
╔════════════════════════════════════════════╗
║                                            ║
║    가시설 흙막이 벽체 자동 작도 시스템    ║
║                                            ║
║    Version: 1.0.0                          ║
║                                            ║
╠════════════════════════════════════════════╣
║                                            ║
║  명령어: RETAINING 또는 RT                 ║
║                                            ║
║  도움말: RETAINING-HELP                    ║
║                                            ║
╚════════════════════════════════════════════╝
```

---

## 기본 사용법

### 단계별 작업 흐름

#### 1단계: 경계선 준비

- 지하벽체 경계선을 **Polyline** 또는 연결된 **Line**으로 작성
- 도면 단위는 **mm** 기준
- 경계선은 폐합 또는 개방 형태 모두 가능

**예시:**

```
┌─────────────────┐
│                 │
│  건축물 지하층  │  ← 이 경계선을 Polyline으로 작성
│                 │
└─────────────────┘
```

#### 2단계: 프로그램 실행

명령줄에 입력:

```
RETAINING
```

또는 단축 명령어:

```
RT
```

#### 3단계: 공법 선택

메뉴에서 원하는 공법 번호 입력:

```
╔════════════════════════════════════════════╗
║  [1] H-Pile + 토류판 공법                  ║
║  [2] CIP 공법 (현장타설말뚝)               ║
║  [3] S.C.W 공법 (소일시멘트벽)             ║
║  [0] 종료                                  ║
╚════════════════════════════════════════════╝

공법 선택 [1/2/3/0]: 1
```

#### 4단계: 경계선 선택

화면에 표시된 안내에 따라 경계선 클릭:

```
경계선 선택 (Polyline 또는 Line):
```

#### 5단계: 파라미터 입력

각 공법별로 필요한 설계 파라미터 입력:

```
엄지말뚝(H-Pile) 간격(m) <1.80>: 2.0
H-Pile 크기(mm) <300.00>: 350
띠장 단수 <3>: 3
띠장 H-Beam 크기(mm) <400.00>: 400
버팀보 간격(m) <6.00>: 6.0
버팀보 H-Beam 크기(mm) <500.00>: 500
```

**참고:** `< >` 안의 값은 기본값이며, **Enter** 키를 눌러 기본값 사용 가능

#### 6단계: 작도 완료

자동으로 다음 요소들이 생성됩니다:

- ✅ 엄지말뚝/벽체
- ✅ 띠장
- ✅ 버팀보
- ✅ 규격 문자
- ✅ 레이어 구성

---

## 공법별 상세 가이드

### 1. H-Pile + 토류판 공법

#### 적용 현장

- 중소규모 굴착 (굴착 깊이 10m 이하)
- 지하수위가 낮은 지역
- 경제성이 중요한 프로젝트
- 연약 지반 아닌 곳

#### 설계 파라미터

| 파라미터 | 권장 범위 | 기본값 | 설명 |
|---------|----------|--------|------|
| H-Pile 간격 | 1.5 ~ 2.5m | 1.8m | 지반 조건에 따라 조정 |
| H-Pile 크기 | H-250 ~ H-400 | H-300 | 굴착 깊이에 따라 선정 |
| 띠장 단수 | 2 ~ 4단 | 3단 | 굴착 깊이 ÷ 3m |
| 띠장 크기 | H-300 ~ H-500 | H-400 | 수평 하중에 따라 선정 |
| 버팀보 간격 | 4 ~ 8m | 6m | 평면 크기에 따라 조정 |

#### 작도 결과

- **엄지말뚝**: 원형 마커와 H 형강 표시
- **토류판**: 이중선으로 표시
- **띠장**: 수평 라인 + 원형 마커
- **버팀보**: 대각선 또는 교차 배치

#### 사용 예시

```
명령어: HPILE-RT
경계선 선택: [Polyline 클릭]
엄지말뚝 간격: 2.0m
H-Pile 크기: 350mm
띠장 단수: 3
```

---

### 2. CIP 공법 (현장타설말뚝)

#### 적용 현장

- 중대규모 굴착 (굴착 깊이 15m 이하)
- 지하수위가 높은 지역
- 차수가 필요한 현장
- 인접 구조물 보호가 중요한 곳

#### CIP 타입 선택

##### 1) 원형 CIP

- 가장 일반적인 형태
- 시공성 우수
- 차수성 양호

##### 2) 사각형 CIP

- 벽체 구성 시 유리
- 철근 배근 용이

##### 3) 연속벽체

- 완벽한 차수
- 강성 최대
- 대규모 현장 적합

#### 설계 파라미터

| 파라미터 | 권장 범위 | 기본값 | 설명 |
|---------|----------|--------|------|
| CIP 간격 | 1.2 ~ 2.0m | 1.5m | 연속벽체는 간격 없음 |
| CIP 직경 | Φ600 ~ Φ1200 | Φ800 | 지반 조건 및 하중 고려 |
| 주철근 직경 | D25 ~ D35 | D32 | 구조 계산 결과 반영 |
| 주철근 개수 | 8 ~ 16개 | 12개 | 말뚝 크기에 따라 조정 |
| 띠장 크기 | H-400 ~ H-600 | H-400 | 수평 하중 고려 |

#### 작도 결과

- **원형 CIP**: 원과 철근 마커 (원주 배치)
- **사각형 CIP**: 사각형과 철근 마커 (모서리 + 중앙)
- **연속벽체**: 연속된 벽체 + 철근 표시
- **띠장/버팀보**: 자동 배치

#### 사용 예시

```
명령어: CIP-RT
경계선 선택: [Polyline 클릭]
CIP 타입: 1 (원형)
CIP 간격: 1.5m
CIP 직경: 800mm
주철근: D32 x 12개
띠장 단수: 3
```

---

### 3. S.C.W 공법 (소일시멘트벽)

#### 적용 현장

- 대규모 굴착 (굴착 깊이 20m 이하)
- 지하수위가 매우 높은 지역
- 완벽한 차수가 필요한 현장
- 연약 지반
- 인접 건물이 밀집한 도심지

#### 설계 파라미터

| 파라미터 | 권장 범위 | 기본값 | 설명 |
|---------|----------|--------|------|
| 벽체 두께 | 600 ~ 1000mm | 800mm | 지반 조건에 따라 선정 |
| 벽체 중첩 | 150 ~ 300mm | 200mm | 차수성 확보 |
| 시멘트 강도 | 0.8 ~ 2.0 MPa | 1.0 MPa | 배합 설계 결과 |
| H-Beam 간격 | 1.5 ~ 2.5m | 2.0m | 구조 안정성 고려 |
| H-Beam 크기 | H-350 ~ H-500 | H-400 | 굴착 깊이에 따라 선정 |
| 띠장 크기 | H-400 ~ H-600 | H-500 | 수평 하중 고려 |

#### 작도 결과

- **소일시멘트 벽체**: 연속된 이중선
- **벽체 중첩부**: 해칭으로 표시
- **H-Beam 보강재**: 십자 형태 + 원형 마커
- **띠장 연결선**: H-Beam에서 띠장으로 연결
- **규격 문자**: 두께, 강도 표기

#### 사용 예시

```
명령어: SCW-RT
경계선 선택: [Polyline 클릭]
벽체 두께: 800mm
벽체 중첩: 200mm
시멘트 강도: 1.0 MPa
H-Beam 간격: 2.0m
H-Beam 크기: H-400
띠장 단수: 3
```

---

## 팁과 트릭

### 경계선 작성 팁

#### 1. Polyline 사용 (권장)

```
명령어: PLINE
시작점 지정:
다음 점 지정:
...
[Enter로 종료]
```

**장점:**
- 한 번에 전체 경계선 인식
- 세그먼트 관리 용이
- 수정이 간편

#### 2. 연결된 Line 사용

```
명령어: LINE
첫째점 지정:
다음점 지정:
...
```

**주의:** 각 Line이 정확히 연결되어야 함

### 파라미터 입력 팁

#### 기본값 활용

대부분의 파라미터에는 합리적인 기본값이 설정되어 있습니다:

```
엄지말뚝 간격(m) <1.80>: [Enter]  ← 1.8m 사용
```

#### 단위 주의

- **길이**: 미터(m) 또는 밀리미터(mm) - 프롬프트에 표시됨
- **각도**: 도(degree)
- **강도**: MPa

### 레이어 관리 팁

#### 레이어별 색상

| 레이어 | 색상 | 용도 |
|--------|------|------|
| PILE | Red (1) | 엄지말뚝/벽체 |
| WALE | Blue (5) | 띠장 |
| STRUT | Green (3) | 버팀보 |
| RETAINING-DIM | Yellow (2) | 치수선 |
| RETAINING-TEXT | White (7) | 문자 |

#### 레이어 재초기화

레이어가 삭제되었거나 문제가 있는 경우:

```
명령어: RETAINING-INIT
```

### 작도 후 수정 팁

#### 개별 요소 수정

- 자동 생성된 요소들은 일반 AutoCAD 객체
- 이동, 복사, 삭제 등 자유롭게 편집 가능

#### 재작도

- 잘못된 경우 요소 삭제 후 명령어 재실행
- 레이어별로 선택하여 일괄 삭제 가능

```
명령어: LAYISO [레이어명]  ← 레이어 격리
명령어: ERASE ALL          ← 전체 삭제
```

---

## 문제 해결

### 일반적인 문제

#### 1. 프로그램이 로드되지 않음

**증상:**
```
명령: RETAINING
알 수 없는 명령입니다.
```

**해결 방법:**
1. `APPLOAD`로 `retaining-main.lsp` 재로드
2. 모든 `.lsp` 파일이 같은 폴더에 있는지 확인
3. 파일 경로에 한글이 없는지 확인

#### 2. 경계선 선택 안 됨

**증상:**
```
경계선 선택: [클릭 시 반응 없음]
```

**해결 방법:**
1. Polyline 또는 Line인지 확인 (Circle, Arc 등은 불가)
2. 객체가 잠겨있지 않은지 확인
3. 레이어가 동결되지 않았는지 확인

#### 3. 엄지말뚝이 너무 많거나 적음

**증상:**
- 간격이 이상함
- 개수가 예상과 다름

**해결 방법:**
1. 경계선 길이 확인 (`LIST` 명령어)
2. 입력한 간격 단위 확인 (m 단위)
3. 도면 단위가 mm인지 확인

#### 4. 띠장/버팀보가 표시되지 않음

**증상:**
- 엄지말뚝만 그려지고 띠장/버팀보가 없음

**해결 방법:**
1. 경계선이 폐합되어 있는지 확인
2. 세그먼트 개수가 2개 이상인지 확인
3. 띠장 단수를 1 이상으로 입력했는지 확인

#### 5. 레이어가 생성되지 않음

**증상:**
```
레이어 'PILE'이 존재하지 않습니다.
```

**해결 방법:**
```
명령어: RETAINING-INIT
```

### 고급 문제 해결

#### LISP 오류 디버깅

LISP 오류 메시지가 표시되는 경우:

1. 오류 메시지 복사
2. 해당 `.lsp` 파일을 텍스트 편집기로 열기
3. 오류 발생 라인 확인
4. 문법 오류 확인 (괄호 짝, 따옴표 등)

#### 성능 문제

경계선이 매우 복잡한 경우:

1. 경계선을 단순화
2. 불필요한 버텍스 제거 (`PEDIT` → `Spline` → `Decurve`)
3. 세그먼트를 나누어 여러 번 실행

---

## 추가 명령어

### 유틸리티 명령어

```
RETAINING-HELP     : 도움말 표시
RETAINING-INIT     : 레이어 초기화
RETAINING-VERSION  : 버전 정보
```

### 직접 실행 명령어

각 공법을 메뉴 없이 직접 실행:

```
HPILE-RT   : H-Pile + 토류판 공법
CIP-RT     : CIP 공법
SCW-RT     : S.C.W 공법
```

---

## 연락처

문제가 지속되거나 기능 개선 요청이 있는 경우 지반사업부 설계팀으로 연락 주시기 바랍니다.

**버전:** 1.0.0  
**최종 업데이트:** 2026-01-13
